<span class="fg-8"> 48 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 49 </span><span class="fg-13">var</span><span class="fg-15"> </span><span class="fg-11">Ansi </span><span class="fg-14">=</span><span class="fg-11"> function </span><span class="fg-14">()</span><span class="fg-15"> </span><span class="fg-11">{</span>                                                       <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 50 </span><span class="fg-15">  </span><span class="fg-13">this</span><span class="fg-15">._attrs </span><span class="fg-14">=</span><span class="fg-15"> </span><span class="fg-11">{}</span><span class="fg-14">;</span>                                                            <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 51 </span><span class="fg-15">  </span><span class="fg-13">this</span><span class="fg-15">._foreground </span><span class="fg-14">=</span><span class="fg-15"> </span><span class="fg-9">0</span><span class="fg-14">;</span>                                                        <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 52 </span><span class="fg-15">  </span><span class="fg-13">this</span><span class="fg-15">._background </span><span class="fg-14">=</span><span class="fg-15"> </span><span class="fg-9">0</span><span class="fg-14">;</span>                                                        <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 53 </span><span class="fg-15">  </span><span class="fg-13">this</span><span class="fg-15">.reset</span><span class="fg-14">();</span>                                                                <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 54 </span><span class="fg-11">}</span><span class="fg-14">;</span>                                                                             <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 55 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 56 </span><span class="fg-15">_.extend</span><span class="fg-14">(</span><span class="fg-15">Ansi.</span><span class="fg-3">prototype</span><span class="fg-14">,</span><span class="fg-15"> </span><span class="fg-11">{</span>                                                     <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 57 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 58 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 59 </span><span class="fg-15">  </span><span class="fg-7">/*</span>                                                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 60 </span><span class="fg-7">   * Ansi.prototype.write</span>                                                      <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 61 </span><span class="fg-7">   *</span>                                                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 62 </span><span class="fg-7">   * Map a number to an attribute</span>                                              <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 63 </span><span class="fg-7">   * Based on http://en.wikipedia.org/wiki/ANSI_escape_code</span>                    <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 64 </span><span class="fg-7">   *</span>                                                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 65 </span><span class="fg-7">   * - value (number) : escape code number</span>                                     <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 66 </span><span class="fg-7">   */</span>                                                                          <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 67 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 68 </span><span class="fg-15">  write: </span><span class="fg-11">function</span><span class="fg-14"> (</span><span class="fg-10">value</span><span class="fg-14">)</span><span class="fg-15"> </span><span class="fg-11">{</span>                                                    <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 69 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 70 </span><span class="fg-15">    </span><span class="fg-12">if</span><span class="fg-15"> </span><span class="fg-14">(</span><span class="fg-13">this</span><span class="fg-15">._foreground </span><span class="fg-14">&gt;</span><span class="fg-15"> </span><span class="fg-9">1</span><span class="fg-14">)</span><span class="fg-15"> </span><span class="fg-11">{</span>                                                <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 71 </span><span class="fg-15">      </span><span class="fg-13">this</span><span class="fg-15">.set</span><span class="fg-14">(</span><span class="fg-10">&#x27;foreground&#x27;</span><span class="fg-14">,</span><span class="fg-15"> value</span><span class="fg-14">);</span>                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 72 </span><span class="fg-15">      </span><span class="fg-13">this</span><span class="fg-15">._foreground </span><span class="fg-14">=</span><span class="fg-15"> </span><span class="fg-9">0</span><span class="fg-14">;</span>                                                    <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 73 </span><span class="fg-15">      </span><span class="fg-12">return</span><span class="fg-15"> </span><span class="fg-13">this</span><span class="fg-14">;</span>                                                             <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 74 </span><span class="fg-15">    </span><span class="fg-11">}</span>                                                                          <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 75 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 76 </span><span class="fg-15">    </span><span class="fg-12">if</span><span class="fg-15"> </span><span class="fg-14">(</span><span class="fg-13">this</span><span class="fg-15">._background </span><span class="fg-14">&gt;</span><span class="fg-15"> </span><span class="fg-9">1</span><span class="fg-14">)</span><span class="fg-15"> </span><span class="fg-11">{</span>                                                <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 77 </span><span class="fg-15">      </span><span class="fg-13">this</span><span class="fg-15">.set</span><span class="fg-14">(</span><span class="fg-10">&#x27;background&#x27;</span><span class="fg-14">,</span><span class="fg-15"> value</span><span class="fg-14">);</span>                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 78 </span><span class="fg-15">      </span><span class="fg-13">this</span><span class="fg-15">._background </span><span class="fg-14">=</span><span class="fg-15"> </span><span class="fg-9">0</span><span class="fg-14">;</span>                                                    <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 79 </span><span class="fg-15">      </span><span class="fg-12">return</span><span class="fg-15"> </span><span class="fg-13">this</span><span class="fg-14">;</span>                                                             <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 80 </span><span class="fg-15">    </span><span class="fg-11">}</span>                                                                          <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 81 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 82 </span><span class="fg-15">    </span><span class="fg-12">if</span><span class="fg-15"> </span><span class="fg-14">(</span><span class="fg-15">value </span><span class="fg-14">===</span><span class="fg-15"> </span><span class="fg-9">5</span><span class="fg-14">)</span><span class="fg-15"> </span><span class="fg-11">{</span>                                                         <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 83 </span><span class="fg-15">      </span><span class="fg-12">if</span><span class="fg-15"> </span><span class="fg-14">(</span><span class="fg-13">this</span><span class="fg-15">._foreground </span><span class="fg-14">===</span><span class="fg-15"> </span><span class="fg-9">1</span><span class="fg-14">)</span><span class="fg-15"> </span><span class="fg-11">{</span>                                            <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 84 </span>       <span class="fg-15"> </span><span class="fg-13">this</span><span class="fg-15">._foreground </span><span class="fg-14">=</span><span class="fg-15"> </span><span class="fg-9">2</span><span class="fg-14">;</span>                                                  <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 85 </span>       <span class="fg-15"> </span><span class="fg-12">return</span><span class="fg-15"> </span><span class="fg-13">this</span><span class="fg-14">;</span>                                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 86 </span><span class="fg-15">      </span><span class="fg-11">}</span>                                                                        <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 87 </span><span class="fg-15">      </span><span class="fg-12">else</span><span class="fg-15"> </span><span class="fg-12">if</span><span class="fg-15"> </span><span class="fg-14">(</span><span class="fg-13">this</span><span class="fg-15">._background </span><span class="fg-14">===</span><span class="fg-15"> </span><span class="fg-9">1</span><span class="fg-14">)</span><span class="fg-15"> </span><span class="fg-11">{</span>                                       <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 88 </span>       <span class="fg-15"> </span><span class="fg-13">this</span><span class="fg-15">._background </span><span class="fg-14">=</span><span class="fg-15"> </span><span class="fg-9">2</span><span class="fg-14">;</span>                                                  <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 89 </span>       <span class="fg-15"> </span><span class="fg-12">return</span><span class="fg-15"> </span><span class="fg-13">this</span><span class="fg-14">;</span>                                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 90 </span><span class="fg-15">      </span><span class="fg-11">}</span>                                                                        <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 91 </span><span class="fg-15">    </span><span class="fg-11">}</span>                                                                          <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 92 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 93 </span><span class="fg-15">    </span><span class="fg-12">switch</span><span class="fg-15"> </span><span class="fg-14">(</span><span class="fg-15">value</span><span class="fg-14">)</span><span class="fg-15"> </span><span class="fg-11">{</span>                                                           <span class="bg-0"><span class="fg-15"> 
</span></span><span class="fg-8"> 94 </span>                                                                               <span class="bg-0"><span class="fg-15"> 
ansi.js                                                            49,1           31%
</span></span>                                                                          <span class="fg-15">  
